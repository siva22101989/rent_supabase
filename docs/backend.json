
{
  "entities": {
    "customer": {
      "title": "Customer",
      "description": "Represents a customer of the warehouse.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "The full name of the customer."
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "The email address of the customer."
        },
        "phone": {
          "type": "string",
          "description": "The phone number of the customer."
        },
        "address": {
          "type": "string",
          "description": "The physical address of the customer."
        },
        "fatherName": {
            "type": "string",
            "description": "The father's name of the customer."
        },
        "village": {
            "type": "string",
            "description": "The village of the customer."
        }
      },
      "required": ["name", "phone", "address"]
    },
    "storageRecord": {
      "title": "Storage Record",
      "description": "Represents a record of items being stored by a customer.",
      "type": "object",
      "properties": {
        "customerId": {
          "type": "string",
          "description": "The ID of the customer who owns these items."
        },
        "commodityDescription": {
          "type": "string",
          "description": "A description of the commodity being stored."
        },
        "location": {
          "type": "string",
          "description": "The location within the warehouse where the items are stored (Lot No.)."
        },
        "bagsStored": {
          "type": "number",
          "description": "The number of bags being stored."
        },
        "storageStartDate": {
          "type": "string",
          "format": "date-time",
          "description": "The date when the storage period began."
        },
        "storageEndDate": {
          "type": ["string", "null"],
          "format": "date-time",
          "description": "The date when the storage period ended. Null if still active."
        },
        "billingCycle": {
          "type": "string",
          "enum": ["6-Month Initial", "1-Year Rollover", "1-Year Renewal", "Completed"],
          "description": "The current billing cycle for the record."
        },
        "payments": {
          "type": "array",
          "items": {
            "$ref": "#/entities/payment"
          }
        },
        "hamaliPayable": {
          "type": "number",
          "description": "The total hamali (loading/unloading) charges payable."
        },
        "totalRentBilled": {
            "type": "number",
            "description": "The total rent amount that has been billed for this record."
        },
        "lorryTractorNo": {
            "type": "string",
            "description": "The Lorry or Tractor number for the delivery."
        },
        "weight": {
            "type": "number",
            "description": "The weight of the stored items."
        },
        "inflowType": {
            "type": "string",
            "enum": ["Direct", "Plot"],
            "description": "The type of inflow, either Direct from the vehicle or from a Plot."
        },
        "plotBags": {
            "type": "number",
            "description": "Number of bags in the plot, if inflow type is 'Plot'."
        },
        "loadBags": {
            "type": "number",
            "description": "Number of bags loaded from the plot, if inflow type is 'Plot'."
        },
        "khataAmount": {
            "type": "number",
            "description": "The amount for vehicle weightbridge (Khata)."
        }
      },
      "required": [
        "customerId",
        "commodityDescription",
        "location",
        "bagsStored",
        "storageStartDate",
        "billingCycle"
      ]
    },
    "payment": {
      "title": "Payment",
      "description": "Represents a payment made towards a storage record.",
      "type": "object",
      "properties": {
        "amount": {
          "type": "number",
          "description": "The amount of the payment."
        },
        "date": {
          "type": "string",
          "format": "date-time",
          "description": "The date the payment was made."
        }
      },
      "required": ["amount", "date"]
    },
    "expense": {
        "title": "Expense",
        "description": "Represents an operational expense.",
        "type": "object",
        "properties": {
          "description": {
            "type": "string",
            "description": "A description of the expense."
          },
          "amount": {
            "type": "number",
            "description": "The amount of the expense."
          },
          "category": {
            "type": "string",
            "enum": ["Worker Salary", "Petrol", "Maintenance", "Utilities", "Hamali", "Other"],
            "description": "The category of the expense."
          },
          "date": {
            "type": "string",
            "format": "date-time",
            "description": "The date the expense was incurred."
          }
        },
        "required": ["description", "amount", "category", "date"]
    }
  },
  "auth": {
    "providers": ["google.com", "password"]
  },
  "firestore": {
    "/customers/{customerId}": {
      "schema": "customer",
      "description": "Stores individual customer documents."
    },
    "/storageRecords/{recordId}": {
      "schema": "storageRecord",
      "description": "Stores individual storage records."
    },
    "/expenses/{expenseId}": {
        "schema": "expense",
        "description": "Stores individual expense documents."
    }
  }
}
